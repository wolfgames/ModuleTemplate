(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[421],{4754:function(e,t,n){Promise.resolve().then(n.bind(n,2134))},2134:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var l,s=n(7437),o=n(2265),c=n(1955),a=n(4916),i=n(537);(l||(l={})).SET_TITLE="SET_TITLE";let r=i.Ry({type:i.i0("SET_TITLE"),value:i.Z_()});(0,c.cx)(r);let u={...c.NC,allowedOrigins:["http://localhost:9005","http://localhost:9007","http://localhost:3000"]};function d(e,t,n){let l=c.c8.Done,s=null==t?void 0:t[l];if(!s)throw Error('Action key "'.concat(l,'" not found in config.actions map.'));return{type:e.expectedResultType,data:n,actions:[s]}}var p=e=>{let{}=e,[t,n]=(0,o.useState)(null),[i,r]=(0,o.useState)(null),[p,h]=(0,o.useState)(null),[x,m]=(0,o.useState)(null),[f,g]=(0,o.useState)({}),[y,b]=(0,o.useState)({}),[N,j]=(0,o.useState)(null),[w,T]=(0,o.useState)("Module Template"),[v,E]=(0,o.useState)({});(0,o.useEffect)(()=>{N&&(N.type===l.SET_TITLE?T(N.value):console.warn("Unknown operation type:",N.type))},[N]),(0,o.useEffect)(()=>{let e=null;try{let t={},{communicator:l,resultHandler:s,config:o}=(0,c.pH)({window,initCallback:(e,n,l)=>{m(e),g(n),b(l),t=l},configSchema:a.ZP,interpretResult:d,originConfig:u});(e=l).onOperation(e=>{j(e)}),e.onAspectUpdate((e,n)=>{t&&e in t?(console.log("âœ… Aspect updated: ".concat(e," ="),n),E(t=>({...t,[e]:n}))):console.warn('\uD83D\uDEA8 Ignored aspect update for "'.concat(e,'". Not in permitted aspects for this module.'))}),e.sendReady(),n(e),r(()=>s),h(o)}catch(e){console.error("Error initializing module:",e)}return()=>{null==e||e.cleanup()}},[]);let S=(0,o.useCallback)((e,n)=>{t&&y&&(y[e]===c.J2.ReadWrite?t.requestAspectValueChange(e,n):console.log("Module does not have write permission for aspect: ".concat(e)))},[t,y]),A=(0,o.useCallback)(()=>{if(!i||!p||!t||!f){let e=[];i||e.push("Result handler"),p||e.push("Config"),t||e.push("Communicator"),f||e.push("Actions"),console.error("The following components are not initialized: ".concat(e.join(", ")));return}p.expectedResultType===c.$4.Attempt&&i({data:1,config:p,actions:f}),p.expectedResultType===c.$4.Choice&&i({data:0,config:p,actions:f})},[f,p,i,t]);return(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:p?(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold mb-4",children:["Operations test: ",w]}),(0,s.jsxs)("p",{className:"text-lg mb-2",children:["Module ID: ",x]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Expected result type: ",p.expectedResultType]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Available actions: ",JSON.stringify(f,null,2)]}),(0,s.jsxs)("div",{className:"mt-4 p-2 bg-gray-100 text-left text-xs",children:[(0,s.jsx)("h3",{className:"font-bold",children:"Received Aspects:"}),(0,s.jsx)("pre",{children:JSON.stringify(v,null,2)})]}),(0,s.jsx)("button",{className:"mt-4 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",onClick:()=>S("Viewed",(v.Viewed||0)+1),children:"Request Aspect Change (Viewed +1)"}),(0,s.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:A,children:"Report Execution Result"})]}):(0,s.jsx)("p",{children:"loading..."})})};function h(){return(0,s.jsx)("main",{className:"min-h-screen bg-gray-100",children:(0,s.jsxs)("div",{className:"container mx-auto py-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Module Demo"}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-2xl mx-auto",children:(0,s.jsx)(p,{})})]})})}},4071:function(e,t,n){"use strict";n.d(t,{r:function(){return c}});var l,s=n(537),o=n(1955);(l||(l={})).CustomAction="custom-action";let c=s.jb({...o.c8,...l})},4916:function(e,t,n){"use strict";n.d(t,{g5:function(){return a}});var l=n(537),s=n(1955),o=n(4071);let c=l.Ry({resultAction:o.r}),a={replayAbility:s.nz.Once,expectedResultType:s.$4.Attempt,integrationType:s.DI.Standalone,resultAction:s.c8.Done},i=s.uN.merge(c);t.ZP=i,i.partial()}},function(e){e.O(0,[955,971,23,744],function(){return e(e.s=4754)}),_N_E=e.O()}]);